(this["webpackJsonpgenerador-scripts-redes"]=this["webpackJsonpgenerador-scripts-redes"]||[]).push([[0],{16:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(4),o=n(2),s=n(3);function i(e,t){return l(e,t,window.sessionStorage)}function l(e,t,n){var c=Object(a.useState)((function(){var a=n.getItem(e);return null!==a?JSON.parse(a):t})),r=Object(s.a)(c,2),o=r[0],i=r[1];Object(a.useEffect)((function(){if(void 0===o)return n.removeItem(e);n.setItem(e,JSON.stringify(o))}),[e,o,n]);var l=Object(a.useCallback)((function(){i(void 0),n.removeItem(e)}),[]);return[o,i,l]}var d=n(7),u=n.n(d),j=u.a.mark(b);function b(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:return t.next=3,e.toString();case 3:e++,t.next=1;break;case 6:case"end":return t.stop()}}),j)}var p,f={hostname:"",interfaces:{},security:{bannerMord:"",encription:!1,lineConsole:!1,vty:!1},hasRip:!1},m={description:"",interfaceCableType:{type:"fastethernet",port:""},ipAddress:"",ipMask:"",dhcp:Object(o.a)({},{dnsServer:"",excluded:[],poolName:""})},h=Object(a.createContext)({routerConfig:f,dispatch:function(e){}}),O=n(8),v=/(\d+\.\d+\.\d+)\.\d+/gm,x=function(e){return e.replace(v,"$1.0")},y=function(e){for(var t=[],n=0;n<4;n++){var a=Math.min(e,8);t.push(256-Math.pow(2,8-a)),e-=a}return t.join(".")},g=/(\d+\.\d+\.\d+)\.\d+/gm,N=function(e){return e.replace(g,"$1.255")},C=n(0),k=function(){var e=Object(a.useContext)(h).routerConfig,t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)("Todav\xeda nada"),i=Object(s.a)(o,2),l=i[0],d=i[1],u=Object(a.useRef)(null);return Object(a.useEffect)((function(){u.current&&clearTimeout(u.current),u.current=setTimeout((function(){r(JSON.stringify(e,null,2)),d(function(e){var t=e.hostname,n=e.security,a=e.hasRip,c="\nenable\nconfigure terminal \nhostname ".concat(t,"\n").concat(n.lineConsole?"enable secret cisco\nline console 0\npassword cisco\nlogin\nexit":"","\n").concat(n.vty?"line vty 0 4\npassword cisco\nlogin\nexit":"","\nbanner motd #").concat(n.bannerMord,"#\n").concat(n.encription?"service password-encryption":"","\n"),r=[];for(var o in e.interfaces){var s=e.interfaces[o],i=s.description,l=s.ipAddress,d=s.ipMask,u=s.interfaceCableType,j=s.dhcp,b=j.dnsServer,p=j.excluded,f=j.poolName,m=u.port,h=u.type,v=x(l),g=N(l),C=y(Number(d));a&&r.push(v);var k="serial"===s.interfaceCableType.type&&s.interfaceCableType.isFemale,S="interface ".concat(h," ").concat(m,"\n").concat(k?"clock rate 64000":"","\ndescription ").concat(i,"\nip address ").concat(l," ").concat(C,"\nno shutdown\nexit\n");if(c+=S,"serial"!==u.type){c+="ip dhcp pool ".concat(f,"\ndefault-router ").concat(l,"\nnetwork ").concat(v," ").concat(C,"\n").concat(""!==b?"dns-server ".concat(b):"","\nip dhcp excluded-address ").concat(l,"\nip dhcp excluded-address ").concat(g,"\n").concat(g===b||""===b?"":"ip dhcp excluded-address ".concat(b),"\n");var w,I=Object(O.a)(p);try{for(I.s();!(w=I.n()).done;){var F=w.value;""!==F&&(c+="ip dhcp excluded-address ".concat(F,"\n"))}}catch(P){I.e(P)}finally{I.f()}c+="exit\n"}}return a&&(c+="router rip\nversion 2\n",r.forEach((function(e){c+="network ".concat(e,"\n")}))),c+="exit\n"}(e))}),1e3)}),[e]),Object(C.jsxs)("p",{className:"container mt-2",children:[Object(C.jsxs)("h2",{className:"text-center",children:["Script de ",e.hostname||""]}),Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("h3",{className:"col-5",children:"JSON generado "}),Object(C.jsx)("h3",{className:"col-7",children:"Script generado "})]}),Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("pre",{className:"col-4 text-break ",children:c}),Object(C.jsx)("pre",{className:"col-7 text-break",children:l})]})]})},S=function(e){var t=e.onChange,n=e.label,a=e.value,c=e.name;return Object(C.jsxs)("div",{className:"form-check",children:[Object(C.jsx)("input",{className:"form-check-input",type:"checkbox",checked:a,name:c,onChange:t}),Object(C.jsx)("label",{className:"form-check-label",htmlFor:c,children:n})]})};!function(e){e[e.hostname=0]="hostname",e[e.banner=1]="banner",e[e.vty=2]="vty",e[e.console=3]="console",e[e.encription=4]="encription",e[e.eraseInterface=5]="eraseInterface",e[e.update=6]="update",e[e.createNewInterface=7]="createNewInterface",e[e.setRip=8]="setRip"}(p||(p={}));var w=function(e,t){var n;switch(t.type){case p.hostname:return Object(o.a)(Object(o.a)({},e),{},{hostname:t.payload});case p.banner:return(n=Object(o.a)({},e)).security.bannerMord=t.payload,n;case p.setRip:return(n=Object(o.a)({},e)).hasRip=t.payload.value,n;case p.vty:return(n=Object(o.a)({},e)).security.vty=t.payload,n;case p.console:return(n=Object(o.a)({},e)).security.lineConsole=t.payload,n;case p.encription:return(n=Object(o.a)({},e)).security.encription=t.payload,n;case p.eraseInterface:return delete(n=Object(o.a)({},e)).interfaces[t.payload.key],n;case p.update:n=Object(o.a)({},e);var a=t.payload,c=a.key,r=a.routerInterface;return n.interfaces[c]=r,n;case p.createNewInterface:n=Object(o.a)({},e);var s=t.payload.key;return n.interfaces[s]=Object(o.a)({},m),n;default:return e}},I=function(){var e=Object(a.useContext)(h),t=e.routerConfig,n=e.dispatch,c=t.hostname,r=t.security,o=t.hasRip,s=r.bannerMord,i=r.encription,l=r.lineConsole,d=r.vty;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h3",{children:"Configuraci\xf3n b\xe1sica"}),Object(C.jsxs)("div",{className:"col col-6",children:[Object(C.jsx)("label",{htmlFor:"hostname",className:"form-label",children:"Poner el hostname"}),Object(C.jsx)("input",{type:"text",className:"form-control",name:"hostname",placeholder:"Hostname del router",value:c,onChange:function(e){n({type:p.hostname,payload:e.target.value})}}),Object(C.jsx)("label",{htmlFor:"banner",className:"form-label",children:"Poner el banner"}),Object(C.jsx)("input",{type:"text",className:"form-control",name:"banner",placeholder:"banner del router",value:s,onChange:function(e){n({type:p.banner,payload:e.target.value})}})]}),Object(C.jsxs)("div",{className:"col col-6",children:[Object(C.jsx)(S,{label:"Tiene encription",name:"encription",value:i,onChange:function(){n({type:p.encription,payload:!i})}}),Object(C.jsx)(S,{label:"Tiene line console security",name:"lineconsole",value:l,onChange:function(){n({type:p.console,payload:!l})}}),Object(C.jsx)(S,{label:"Tiene vty",name:"vty",value:d,onChange:function(){n({type:p.vty,payload:!d})}}),Object(C.jsx)(S,{label:"Tiene rip",name:"vty",value:o,onChange:function(){n({type:p.setRip,payload:{value:!o}})}})]})]})},F=function(e){var t=Object(a.useState)(e),n=Object(s.a)(t,2),c=n[0],i=n[1];return Object(o.a)(Object(o.a)({},c),{},{formulario:c,onChange:function(e,t){i(Object(o.a)(Object(o.a)({},c),{},Object(r.a)({},t,e)))},clearFormulario:function(){i((function(e){return Object.keys(e).map((function(t,n){e[t]=""})),e}))}})},P=function(e){var t=e.name,n=e.label,a=e.placeHolder,c=e.value,r=e.onChange;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("label",{htmlFor:t,className:"form-label",children:n}),Object(C.jsx)("input",{type:"text",className:"form-control",name:t,placeholder:a,value:c,onChange:function(e){r(e.target.value,t)}})]})},R=function(e){var t,n=e.id_interface,c=e.routerInterface,r=Object(a.useContext)(h).dispatch,s=c.dhcp,i=F({dnsServer:s.dnsServer,poolName:s.poolName,excluded:s.excluded.join(",")}),l=i.dnsServer,d=i.poolName,u=i.excluded,j=i.formulario,b=i.onChange;return Object(a.useEffect)((function(){var e=j.excluded.split(",").map((function(e){return e.trim()}));r({type:p.update,payload:{key:n,routerInterface:Object(o.a)(Object(o.a)({},c),{},{dhcp:{dnsServer:l,poolName:d,excluded:e}})}})}),[r,l,u,d]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("h5",{children:["DHCP Configuration ",null!==(t="DHCP::".concat(d))&&void 0!==t?t:""]}),Object(C.jsxs)("div",{className:"dhcp-config-form",children:[Object(C.jsx)(P,{label:"Pon el nombre del pool name",onChange:b,value:d,placeHolder:"Pon el poolName",name:"poolName"}),Object(C.jsx)(P,{label:"Pon la ip del dnsServer",onChange:b,value:l,placeHolder:"Pon el dnsServer",name:"dnsServer"}),Object(C.jsx)(P,{label:"Pon las ip excluidas, separadas por commas",onChange:b,value:u,placeHolder:"Pon el excluded",name:"excluded"})]})]})},M=(b(),function(e){var t=e.id,n=e.routerInter,c=n.description,r=n.interfaceCableType,i=n.ipMask,l=n.ipAddress,d=(n.dhcp,Object(a.useContext)(h).dispatch),u=Object(a.useState)(r.type),j=Object(s.a)(u,2),b=j[0],f=j[1],m=F({ipMas:i,ipAdd:l,port:r.port,descriptionForm:c}),O=m.onChange,v=m.ipAdd,x=m.ipMas,y=m.descriptionForm,g=m.port,N=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(a.useState)(e),n=Object(s.a)(t,2),c=n[0],r=n[1];return[c,function(){r(!c)}]}("serial"===r.type&&r.isFemale),k=Object(s.a)(N,2),w=k[0],I=k[1];return Object(a.useEffect)((function(){var e="serial"===b?{type:"serial",isFemale:w,port:g}:{type:b,port:g};d({type:p.update,payload:{key:t,routerInterface:Object(o.a)(Object(o.a)({},n),{},{description:y,interfaceCableType:e,ipAddress:v,ipMask:x})}})}),[w,y,d,t,v,x,g,b]),Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("h4",{className:"text-center",children:["Configuraci\xf3n para ",y]}),Object(C.jsxs)("div",{className:"row",children:[Object(C.jsxs)("div",{className:"col-6",children:[Object(C.jsx)("strong",{children:"Select Type of cable"}),Object(C.jsxs)("select",{className:"form-select","aria-label":"Default select example",value:b,onChange:function(e){return f(e.target.value)},children:[Object(C.jsx)("option",{value:"fastethernet",children:"Fast Ethernet"}),Object(C.jsx)("option",{value:"serial",children:"Serial "}),Object(C.jsx)("option",{value:"gigabitethernet",children:"Gigabit"})]}),"serial"===b&&Object(C.jsx)(S,{label:"Es hembra?",value:w,name:"es-hembra",onChange:function(){I()}})]}),Object(C.jsx)("div",{className:"col-6",children:Object(C.jsx)(P,{label:"Pon el port number",name:"port",onChange:O,placeHolder:"Port number",value:g})}),Object(C.jsx)("div",{children:Object(C.jsx)(P,{label:"Pon el description",name:"descriptionForm",onChange:O,placeHolder:"description",value:y})})]}),Object(C.jsx)("strong",{children:"Ip address"})," ",Object(C.jsx)("br",{}),Object(C.jsx)("small",{children:"Pones la direccion normal y luego pones diagonal algo"}),Object(C.jsxs)("div",{className:"input-group",children:[Object(C.jsx)("div",{className:"col-9",children:Object(C.jsx)("input",{type:"text",className:"form-control col-9",name:"ipAddress",placeholder:"ipAddress del router",value:v,onChange:function(e){O(e.target.value,"ipAdd")}})}),Object(C.jsx)("span",{className:"input-group-text",children:"/"}),Object(C.jsx)("input",{type:"text",className:"form-control",name:"ipMask",placeholder:"ex. 24",value:x,onChange:function(e){O(e.target.value,"ipMas")}})]}),"serial"!==n.interfaceCableType.type&&Object(C.jsx)("div",{className:"dhcp-config-container mt-4",children:Object(C.jsx)(R,{id_interface:t,routerInterface:n})})]})}),T=b(),A=function(){var e=Object(a.useContext)(h),t=e.routerConfig,n=e.dispatch,c=Object(a.useRef)(null);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h3",{children:"Configuraci\xf3n de las interfaces"}),Object(C.jsx)("div",{className:"interfaces",ref:c,children:Object.keys(t.interfaces).map((function(e){var a=t.interfaces[e];return Object(C.jsx)("div",{className:"interface row",children:Object(C.jsxs)("div",{className:"my-1",children:[Object(C.jsx)(M,{id:e,routerInter:a}),Object(C.jsx)("button",{className:"btn btn-danger col-4 offset-8",onClick:function(){n({type:p.eraseInterface,payload:{key:e}})},children:"Eliminar interface"})]})},e)}))}),Object(C.jsx)("button",{className:"btn btn-success col-6 offset-3 mt-2",onClick:function(){var e,t,a=null!==(e=null===T||void 0===T||null===(t=T.next())||void 0===t?void 0:t.value)&&void 0!==e?e:"1";n({type:p.createNewInterface,payload:{key:a}})},children:"Add interface"})]})},E=function(){return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)("div",{className:"row",children:Object(C.jsx)(I,{})}),Object(C.jsx)("div",{className:"row",children:Object(C.jsx)(A,{})})]})})},H=function(e){var t=e.routerConfigParameters,n=(e.updateRouter,e.id),c=i("router_".concat(n),t),r=Object(s.a)(c,3),o=r[0],l=r[1],d=r[2],u=Object(a.useReducer)(w,o||f),j=Object(s.a)(u,2),b=j[0],p=j[1];return Object(a.useEffect)((function(){l(b)}),[b,l]),Object(a.useEffect)((function(){return function(){d()}}),[]),Object(C.jsx)(h.Provider,{value:{routerConfig:b,dispatch:p},children:Object(C.jsxs)("div",{className:"container mb-5 px-5",children:[Object(C.jsxs)("p",{children:[Object(C.jsx)("b",{children:"\xbfComo usarlo?"})," ",Object(C.jsx)("br",{})," Puedes usar la configuracion llenando la informacion necesaria en las siguientes partes"]}),Object(C.jsxs)("h2",{className:"text-center",children:["Configuracion de ","Router::".concat(b.hostname)||!1]}),Object(C.jsx)(E,{}),Object(C.jsx)(k,{})]})})},J=b(),D=function(){var e=i("routerConfig",{}),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(null!==n&&void 0!==n?n:{}),d=Object(s.a)(l,2),u=d[0],j=d[1],b=function(e,t){j((function(n){var a=Object(o.a)({},n);return a[e]=t,a}))};return Object(a.useEffect)((function(){c(u),console.log("Algo se esta cambiando")}),[u,c]),Object(C.jsxs)("div",{className:"container",children:[Object.entries(u).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return console.log("Deber\xeda anadir un router aqui"),Object(C.jsxs)("div",{className:"container my-3",children:[Object(C.jsx)(H,{routerConfigParameters:a,id:n,updateRouter:b}),Object(C.jsxs)("button",{className:"btn btn-danger col-4 offset-4",onClick:function(){j((function(e){var t=Object(o.a)({},e);return delete t[n],t}))},children:["Delete ",a.hostname||"Router"]})]},n)})),Object(C.jsx)("button",{className:"btn btn-success col-10 offset-1 mb-5",onClick:function(){var e="";do{var t,n;e=null!==(t=null===(n=J.next())||void 0===n?void 0:n.value)&&void 0!==t?t:"1"}while(u[e]);j(Object(o.a)(Object(o.a)({},u),{},Object(r.a)({},e,Object(o.a)({},f))))},children:"Add Router"})]})};var _=function(){return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(D,{})})},$=n(9);n.n($).a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(_,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.632e908b.chunk.js.map